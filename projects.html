<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <link href="styles/style.css" rel="stylesheet" type="text/css">
        <title>Optimize Projects</title>
        <script defer src="scripts/game.js"></script>
        <script src="https://d3js.org/d3.v5.min.js"></script>
    </head>
    <body>
        <header>
            <h1>GenYume's Hub</h1>
        </header>
        <nav>
            <ul id="navBar">
                <li><a href="index.html">Home</a></li>
                <li class="active"><a href="projects.html">Projects</a></li>
                <li><a href="learn.html">Learn</a></li>
                <li><a href="about.html">About</a></li>
            </ul>
        </nav>
        <main>
            <article class="gg">
                <header><h2>Number Guessing game</h2></header>
                <p>I've selected a random number between 1 and 100. See if you can guess it in less than 10 tries. Do not worry, I'll guide you through this game.</p>
                <div class="form">
                  <label for="guessField">Enter a guess: </label><input type="text" id="guessField" class="guessField">
                  <input type="submit" value="Submit guess" class="guessSubmit">
                </div>
                <div class="resultParas">
                  <p class="guesses"></p>
                  <p class="lastResult"></p>
                  <p class="lowOrHi"></p>
                </div>
            </article>
            <article class="abba">
                <header><h2>Understanding a bad investment</h2></header>
                <p>In this section, I will set out to break down and undestand the variations of my Life Insurance and ultimately see what I should change to optimize it.</p>
                <p>My Life Insurance has been set up at the end of May 2017.<br>
                  I've deposited 500 euros on it monthly between May 2017 and June 2017.<br>
                  Here is the breakdown of my portfolio :
                </p>
            </article>
            <article class="ssm2">
                <header><h2>Law in 3 states</h2></header>
                <svg width="960" height="500"></svg>
                <script>
                    var svg = d3.select("svg"),
                        margin = {top: 20, right: 80, bottom: 30, left: 50},
                        width = svg.attr("width") - margin.left - margin.right,
                        height = svg.attr("height") - margin.top - margin.bottom,
                        g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

                    var parseTime = d3.timeParse("%Y-%m-%d");

                    var x = d3.scaleTime().range([0, width]),
                        y = d3.scaleLinear().range([height, 0]),
                        z = d3.scaleOrdinal(d3.schemeCategory10);

                    var line = d3.line()
                        .curve(d3.curveBasis)
                        .x(function(d) { return x(d.year); })
                        .y(function(d) { return y(d.law); });


                    d3.csv("sets/ssm2.csv", type).then(function(data) {
                      var cities = data.columns.slice(1).map(function(id) {
                          return {
                          id: id,
                          values: data.map(function(d) {
                            return {year: d.year, law: d[id]};
                          })
                        };
                      });

                      x.domain(d3.extent(data, function(d) { return d.year; }));

                      y.domain([
                        d3.min(cities, function(c) { return d3.min(c.values, function(d) { return 0 }); }),
                        d3.max(cities, function(c) { return d3.max(c.values, function(d) { return d.law; }); })
                      ]);

                      z.domain(cities.map(function(c) { return c.id; }));

                      g.append("g")
                          .attr("class", "axis axis--x")
                          .attr("transform", "translate(0," + height + ")")
                          .call(d3.axisBottom(x));

                      g.append("g")
                          .attr("class", "axis axis--y")
                          .call(d3.axisLeft(y))
                        .append("text")
                          .attr("transform", "rotate(-90)")
                          .attr("y", 6)
                          .attr("dy", "0.71em")
                          .attr("fill", "#000")
                          .text("Law");

                      var city = g.selectAll(".city")
                        .data(cities)
                        .enter().append("g")
                          .attr("class", "city");

                      city.append("path")
                          .attr("class", "line")
                          .attr("d", function(d) { return line(d.values); })
                          .style("stroke", function(d) { return z(d.id); });

                      city.append("text")
                          .datum(function(d) { return {id: d.id, value: d.values[d.values.length - 1]}; })
                          .attr("transform", function(d) { return "translate(" + x(d.value.year) + "," + y(d.value.law) + ")"; })
                          .attr("x", 3)
                          .attr("dy", "0.35em")
                          .style("font", "10px sans-serif")
                          .text(function(d) { return d.id; });
                    });

                    function type(d, _, columns) {
                      d.year = parseTime(d.year);
                      for (var i = 1, n = columns.length, c; i < n; ++i) d[c = columns[i]] = +d[c];
                      return d;
                    }

                </script>
            </article>
            <!--<article class="ssm">
                <header><h2>Legal Status of Same-sex Marriage</h2></header>
                <script type="text/javascript"charset="utf-8">
                    d3.text("https://raw.githubusercontent.com/zonination/samesmarriage/master/ssm.csv").then(function(data) {
                        var parsedCSV = d3.csvParseRows(data);

                        var container = d3.select(".ssm")
                            .append("table")

                            .selectAll("tr")
                                .data(parsedCSV).enter()
                                .append("tr")

                            .selectAll("td")
                                .data(function(d) { return d; }).enter()
                                .append("td")
                                .text(function(d) { return d; });
                    });//v5
                </script>
            </article>-->
        </main>
    </body>
</html>
